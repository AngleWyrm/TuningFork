<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2009 - the last FREE Community Edition 7.0.2.746 -->
<Patch>
    
    <!-- Set vanilla shelves to start with nothing allowed in storage when first constructed -->
    <Operation Class="PatchOperationReplace">
        <xpath>*/ThingDef[defName = "Shelf"]/building/defaultStorageSettings/filter</xpath>
        <value>
            <filter>
                <categories/>
            </filter>
        </value>
    </Operation>
    
    <!-- "Allow Rotten" container behavior set to default of false -->
    <Operation Class="PatchOperationReplace">
        <xpath>*/SpecialThingFilterDef[defName = "AllowRotten"]/allowedByDefault</xpath>
        <value>
            <allowedByDefault>false</allowedByDefault>
		</value>
	</Operation>
    
    <!-- For food that can be eaten at a table, increase the search radius to find somewhere to sit when eating -->
    <Operation Class="PatchOperationReplace"> <!-- update records that already have a chairSearchRadius -->
        <xpath>*/ThingDef[@Abstract="True"]/ingestible/chairSearchRadius</xpath>
        <value>
            <chairSearchRadius>50</chairSearchRadius> <!-- 50 tiles -->
		</value>
	</Operation>
    <Operation Class="PatchOperationSequence"> <!-- update records that don't have a chairSearchRadius -->
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/ThingDef[@Abstract="True"]/ingestible/chairSearchRadius</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/ThingDef[@Abstract="True"]/ingestible</xpath>
                <value>
                    <chairSearchRadius>50</chairSearchRadius> <!-- 50 tiles -->
                </value>
            </li>
            <!-- patch for RimRue's Packed Lunch mod, so they can be eaten without a chair -->
            <li Class="PatchOperationReplace">
                <xpath>/Defs/ThingDef[@Name="LunchMealBase"]/ingestible/chairSearchRadius</xpath>
                <value>
                    <chairSearchRadius>1</chairSearchRadius>
				</value>
			</li>
        </operations>
    </Operation>
    
    <!-- Set Cassandra storyteller to allow larger populations of about two to four dozen colonists -->
    <Operation Class="PatchOperationReplace">
        <xpath>*/StorytellerDef[defName = "Cassandra"]/populationIntentFromPopCurve</xpath>
        <value>
            <populationIntentFromPopCurve>
                <points> <!-- {population, influence} -->
                    <li> 0, 12</li>
                    <li> 6,  8</li>
                    <li>12,  6</li>
                    <li>18,  2</li>
                    <li>24,  0</li>
                    <li>36, -2</li>
                    <li>50, -5</li>
                </points>
            </populationIntentFromPopCurve>            
		</value>
	</Operation>
    
</Patch>